<h1>Редактировать учебную группу</h1>
<a href="/groups">Вернуться к списку групп</a>
<form id='edit-group-form' action='/groups/{{group.id}}' method='POST'>
  <label for='name'>Название:</label>
  <input type='text' id='name' name='name' value='{{group.name}}' required />
  <button type='submit'>Изменить</button>
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $("#edit-group-form").submit(function(e) {
      e.preventDefault();
      const form = $(this);
      $.post(form.attr('action'), form.serialize()).done(function(response) {
        if (response.message === 'Данные группы успешно обновлены!') {
          M.toast({html: response.message, classes: '#26a69a teal lighten-1 rounded'});
          setTimeout(function() {
            location.reload();
          }, 2000);
        } else {
          M.toast({html: response.message, classes: 'rounded red'});
        }
      }).fail(function(xhr) {
        if (xhr.responseJSON && xhr.responseJSON.message) {
          M.toast({html: xhr.responseJSON.message, classes: 'rounded red'});
        } else {
          M.toast({html: 'Ошибка: данные группы не удалось изменить!', classes: 'rounded red'});
        }
      });
    });
  });
</script>
